{% assign selected_variant = product.selected_or_first_available_variant %}

<div class="bg-white">
  <div class="mx-auto max-w-2xl px-4 pt-16 pb-24 sm:px-6 sm:pt-24 sm:pb-32 lg:grid lg:max-w-7xl lg:grid-cols-2 lg:gap-x-8 lg:px-8">
    <!-- Product details -->
    <div class="lg:max-w-lg lg:self-end">
      <nav aria-label="Breadcrumb">
        <ol role="list" class="flex items-center space-x-2">
          <li>
            <div class="flex items-center text-sm">
              {% for collection in product.collections %}
                {% if forloop.index == 1 or 2 %}
                  <a href="{{collection.url}}" class="font-medium text-gray-500 hover:text-gray-900">
                    {{- collection.title -}}
                  </a>
                  {% unless forloop.last %}
                    <svg
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      aria-hidden="true"
                      class="ml-2 h-5 w-5 flex-shrink-0 text-gray-300"
                    >
                      <path d="M5.555 17.776l8-16 .894.448-8 16-.894-.448z"></path>
                    </svg>
                  {% endunless %}
                {% endif %}
              {% endfor %}
            </div>
          </li>
        </ol>
      </nav>

      <div class="mt-4">
        <h1 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">{{ product.title }}</h1>
      </div>

      <section aria-labelledby="information-heading" class="mt-4">
        <h2 id="information-heading" class="sr-only">商品の情報</h2>

        <div class="flex items-center">
          <p class="text-lg text-gray-900 sm:text-xl">
            {{ product.price | money }}（税別）<span class="text-sm">
              {{- product.price | times: 1.1 | money }}（税込）</span
            >
          </p>

          <div class="ml-4 border-l border-gray-300 pl-4">
            <h2 class="sr-only">レビュー</h2>
            <div class="flex items-center">
              <div>
                <div class="flex items-center">
                  <svg
                    class="text-yellow-400 h-5 w-5 flex-shrink-0"
                    x-state:on="Active"
                    x-state:off="Default"
                    x-state-description="Active: &quot;text-yellow-400&quot;, Default: &quot;text-gray-300&quot;"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path fill-rule="evenodd" d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z" clip-rule="evenodd"></path>
                  </svg>

                  <svg
                    class="text-yellow-400 h-5 w-5 flex-shrink-0"
                    x-state-description="undefined: &quot;text-yellow-400&quot;, undefined: &quot;text-gray-300&quot;"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path fill-rule="evenodd" d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z" clip-rule="evenodd"></path>
                  </svg>

                  <svg
                    class="text-yellow-400 h-5 w-5 flex-shrink-0"
                    x-state-description="undefined: &quot;text-yellow-400&quot;, undefined: &quot;text-gray-300&quot;"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path fill-rule="evenodd" d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z" clip-rule="evenodd"></path>
                  </svg>

                  <svg
                    class="text-yellow-400 h-5 w-5 flex-shrink-0"
                    x-state-description="undefined: &quot;text-yellow-400&quot;, undefined: &quot;text-gray-300&quot;"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path fill-rule="evenodd" d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z" clip-rule="evenodd"></path>
                  </svg>

                  <svg
                    class="text-gray-300 h-5 w-5 flex-shrink-0"
                    x-state-description="undefined: &quot;text-yellow-400&quot;, undefined: &quot;text-gray-300&quot;"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path fill-rule="evenodd" d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z" clip-rule="evenodd"></path>
                  </svg>
                </div>
                <p class="sr-only">4 out of 5 stars</p>
              </div>
              <p class="ml-2 text-sm text-gray-500">1624 reviews</p>
            </div>
          </div>
        </div>
        {% if product.price > 500000 %}
          <p>送料無料です</p>
        {% endif %}
        <div class="mt-4 space-y-6">
          <p class="text-base text-gray-500">
            {{ product.description }}
          </p>
        </div>

        <div class="mt-6 flex items-center">
          {% if selected_variant.available %}
            <svg
              class="h-5 w-5 flex-shrink-0 text-green-500"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
            >
              <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd"></path>
            </svg>
            <p class="ml-2 text-sm text-gray-500">在庫あり/発送可能</p>
          {% endif %}
          {% if selected_variant.available == false %}
            <svg
              class="h-5 w-5 flex-shrink-0 text-red-500"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
            >
              <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd"></path>
            </svg>
            <p class="ml-2 text-sm text-gray-500">売り切れ</p>
          {% endif %}
        </div>
      </section>
    </div>

    <!-- Product image -->

    <div class="relative mt-10 lg:col-start-2 lg:row-span-2 lg:mt-0 lg:self-center">
      {% if product.price > 500000 %}
        <div class="absolute z-10 top-0 right-0">
          {% render 'icon-free-shipping' %}
        </div>
      {% endif %}
      <div class="aspect-w-1 aspect-h-1 overflow-hidden rounded-lg">
        <img
          src="{{product.featured_image | img_url: 'master'}}"
          alt="{{ product.featured_image.alt }}"
          class="h-full w-full object-cover object-center"
        >
      </div>
    </div>

    <!-- Product form -->
    <div class="mt-10 lg:col-start-1 lg:row-start-2 lg:max-w-lg lg:self-start">
      <section aria-labelledby="options-heading">
        <h2 id="options-heading" class="sr-only">商品のオプション</h2>
        <div class="mt-4">
          <a href="#" class="group inline-flex text-sm text-gray-500 hover:text-gray-700">
            <span>{{ section.settings.notice_heading }}</span>
            <svg
              class="ml-2 h-5 w-5 flex-shrink-0 text-gray-400 group-hover:text-gray-500"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
            >
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
            </svg>
          </a>
        </div>

        {% form 'product' product %}
          <input
            type="submit"
            class="flex w-full items-center justify-center rounded-md border border-transparent bg-indigo-600 py-3 px-8 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50"
            value="購入する"
          >
        {% endform %}
        <div class="mt-6 text-center">
          <a href="#" class="group inline-flex text-base font-medium">
            <svg
              class="mr-2 h-6 w-6 flex-shrink-0 text-gray-400 group-hover:text-gray-500"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"></path>
            </svg>
            <span class="text-gray-500 hover:text-gray-700">{{ section.settings.guarantee_heading }}</span>
          </a>
        </div>
      </section>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "商品情報",
  "settings": [
    {
      "type": "text",
      "id": "notice_heading",
      "default": "What size should I buy?",
      "label": "注意文"
    },
    {
      "type": "text",
      "id": "buy_btn_txt",
      "default": "購入する",
      "label": "購入ボタンのテキスト"
    },
    {
      "type": "text",
      "id": "guarantee_heading",
      "default": "永久保証",
      "label": "保証の見出し"
    }
  ]
}
{% endschema %}
